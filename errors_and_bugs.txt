# Errors and Bugs

## Known Issues

### 1. Database Connection Errors
- **Error**: `sqlite3.OperationalError: database is locked`
- **Cause**: Multiple concurrent database access
- **Fix**: Implement connection pooling or file locking

### 2. Module Import Errors
- **Error**: `ModuleNotFoundError: No module named 'agents'`
- **Cause**: Missing `__init__.py` files or incorrect Python path
- **Fix**: Ensure all directories have `__init__.py` files

### 3. FastAPI Validation Errors
- **Error**: `422 Unprocessable Entity`
- **Cause**: Invalid request body format
- **Fix**: Check request matches CoreRequest model schema

### 4. Memory Database Issues
- **Error**: `AttributeError: 'NoneType' object has no attribute 'execute'`
- **Cause**: Database connection not initialized
- **Fix**: Initialize ContextMemory properly in main.py

### 5. Gateway Processing Errors
- **Error**: `KeyError: 'module'` in gateway.py
- **Cause**: Missing module mapping in gateway
- **Fix**: Add module handlers in Gateway class

### 6. Port Already in Use
- **Error**: `OSError: [Errno 48] Address already in use`
- **Cause**: Port 8000 already occupied
- **Fix**: Use different port or kill existing process

### 7. Missing Dependencies
- **Error**: `ImportError: No module named 'uvicorn'`
- **Cause**: Requirements not installed
- **Fix**: Run `pip install -r requirements.txt`

### 8. JSON Serialization Errors
- **Error**: `TypeError: Object of type 'datetime' is not JSON serializable`
- **Cause**: Non-serializable objects in response
- **Fix**: Convert datetime objects to strings

### 9. User Context Not Found
- **Error**: Empty response from `/get-context`
- **Cause**: No previous interactions for user_id
- **Fix**: Handle empty context gracefully

### 10. CORS Issues
- **Error**: `Access-Control-Allow-Origin` header missing
- **Cause**: Frontend requests blocked by CORS policy
- **Fix**: Add CORS middleware to FastAPI app

## Debugging Tips

1. Check logs in console output
2. Use FastAPI docs at `/docs` for testing
3. Verify database file permissions
4. Ensure all environment variables are set
5. Test endpoints individually before integration

## Common Solutions

- Restart the application
- Clear database file and reinitialize
- Check Python path and imports
- Verify request body format
- Use proper HTTP methods and endpoints